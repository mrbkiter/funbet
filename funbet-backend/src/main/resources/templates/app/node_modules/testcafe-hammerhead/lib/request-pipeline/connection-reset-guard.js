'use strict';

exports.__esModule = true;

exports.default = function (fn) {
    connectionResetDomain.run(fn);
};

var _domain = require('domain');

var _domain2 = _interopRequireDefault(_domain);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var connectionResetDomain = _domain2.default.create();

connectionResetDomain.on('error', function (err) {
    if (err.code !== 'ECONNRESET') {
        connectionResetDomain.removeAllListeners('error');
        throw new Error(err);
    }
});

module.exports = exports['default'];