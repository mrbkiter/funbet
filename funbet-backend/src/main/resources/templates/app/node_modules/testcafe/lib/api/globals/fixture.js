'use strict';

exports.__esModule = true;

var _typeof2 = require('babel-runtime/helpers/typeof');

var _typeof3 = _interopRequireDefault(_typeof2);

var _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');

var _classCallCheck3 = _interopRequireDefault(_classCallCheck2);

var _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');

var _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);

var _inherits2 = require('babel-runtime/helpers/inherits');

var _inherits3 = _interopRequireDefault(_inherits2);

var _runtime = require('../../errors/runtime');

var _message = require('../../errors/runtime/message');

var _message2 = _interopRequireDefault(_message);

var _handleTagArgs = require('../../utils/handle-tag-args');

var _handleTagArgs2 = _interopRequireDefault(_handleTagArgs);

var _testingUnit = require('./testing-unit');

var _testingUnit2 = _interopRequireDefault(_testingUnit);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var Fixture = function (_TestingUnit) {
    (0, _inherits3.default)(Fixture, _TestingUnit);

    function Fixture(globals) {
        var _ret;

        (0, _classCallCheck3.default)(this, Fixture);

        var _this = (0, _possibleConstructorReturn3.default)(this, _TestingUnit.call(this, globals));

        _this.path = globals.filename;

        _this.pageUrl = 'about:blank';

        _this.beforeEachFn = null;
        _this.afterEachFn = null;

        return _ret = _this.apiOrigin, (0, _possibleConstructorReturn3.default)(_this, _ret);
    }

    Fixture.prototype._add = function _add(name) {
        for (var _len = arguments.length, rest = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            rest[_key - 1] = arguments[_key];
        }

        name = (0, _handleTagArgs2.default)(name, rest);

        var nameType = typeof name === 'undefined' ? 'undefined' : (0, _typeof3.default)(name);

        if (nameType !== 'string') throw new _runtime.APIError('apiOrigin', _message2.default.fixtureNameIsNotAString, nameType);

        this.name = name;
        this.globals.currentFixture = this;

        return this.apiOrigin;
    };

    Fixture.prototype._beforeEach$ = function _beforeEach$(fn) {
        var fnType = typeof fn === 'undefined' ? 'undefined' : (0, _typeof3.default)(fn);

        if (fnType !== 'function') throw new _runtime.APIError('beforeEach', _message2.default.beforeEachIsNotAFunction, fnType);

        this.beforeEachFn = _testingUnit2.default._wrapTestFunction(fn);

        return this.apiOrigin;
    };

    Fixture.prototype._afterEach$ = function _afterEach$(fn) {
        var fnType = typeof fn === 'undefined' ? 'undefined' : (0, _typeof3.default)(fn);

        if (fnType !== 'function') throw new _runtime.APIError('afterEach', _message2.default.afterEachIsNotAFunction, fnType);

        this.afterEachFn = _testingUnit2.default._wrapTestFunction(fn);

        return this.apiOrigin;
    };

    return Fixture;
}(_testingUnit2.default);

exports.default = Fixture;


_testingUnit2.default._makeAPIListForChildClass(Fixture);
module.exports = exports['default'];